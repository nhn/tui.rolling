

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: rolling.js | Rolling</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 150px; height: 13px">
        
            <a href="https://github.com/nhnent/tui.jsdoc-template" rel="noopener noreferrer" target="_blank">
                <img src="https://cloud.githubusercontent.com/assets/12269563/20029815/01133928-a39a-11e6-80f3-12500a91c755.png" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Rolling</a></h1>
        
            <span class="version">v2.1.0</span>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
        <ol class="lnb-tab">
            <li id="api-tab">
                <a href="#"><h4>API</h4></a>
            </li>
            <li id="examples-tab">
                <a href="#"><h4>Examples</h4></a>
            </li>
        </ol>
    
    <div class="lnb-examples hidden"><h3>Examples</h3><ul><li><a href="tutorial-example01-basic.html">1. Basic</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="example01-basic_sub"></div></li><li><a href="tutorial-example02-non-circular.html">2. Non-circular</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="example02-non-circular_sub"></div></li><li><a href="tutorial-example03-auto-rolling.html">3. Auto Rolling</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="example03-auto-rolling_sub"></div></li><li><a href="tutorial-example04-changable-data.html">4. Changable Data</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="example04-changable-data_sub"></div></li><li><a href="tutorial-example05-custom-event.html">5. Custom Event</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="example05-custom-event_sub"></div></li><li><a href="tutorial-example06-effect.html">6. Effect</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="example06-effect_sub"></div></li></ul></div><div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="Rolling.html">Rolling</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Rolling_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Rolling.html#auto">auto</a></li><li><a href="Rolling.html#moveTo">moveTo</a></li><li><a href="Rolling.html#roll">roll</a></li><li><a href="Rolling.html#setFlow">setFlow</a></li><li><a href="Rolling.html#stop">stop</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="Rolling.html#event:afterMove">afterMove</a></li><li><a href="Rolling.html#event:beforeMove">beforeMove</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Rolling component core.
 * @author NHN Ent. FE dev team.&lt;dl_javascript@nhnent.com>
 */

'use strict';

var snippet = require('tui-code-snippet');

var Roller = require('./roller');
var Data = require('./rolldata');
var sendHostName = function() {
    var hostname = location.hostname;
    snippet.imagePing('https://www.google-analytics.com/collect', {
        v: 1,
        t: 'event',
        tid: 'UA-115377265-9',
        cid: hostname,
        dp: hostname,
        dh: 'rolling'
    });
};

/**
 * Rolling core object
 * @class Rolling
 * @param {Object} options The options
 *      @param {HTMLElement|String} options.element A root element or id that will become root element's
 *      @param {Boolean} [options.isVariable=true|false] Whether the data is changable or not [default value is false]
 *      @param {Boolean} [options.isCircular=true|false] Whether circular or not [default value is true but isVariable true case]
 *      @param {Boolean} [options.isAuto=true|false] Whether auto rolling or not [default value is false]
 *      @param {Boolean} [options.usageStatistics=true|false] send hostname to google analytics [default value is true]
 *      @param {Number} [options.delayTime=1000|...] Distance time of auto rolling. [defulat 3 second]
 *      @param {Number} [options.direction='horizontal|vertical'] The flow direction panel [default value is horizontal]
 *      @param {Number} [options.duration='1000|...] A move duration
 *      @param {Number} [options.initNum='0|...] Initalize selected rolling panel number
 *      @param {String} [options.motion='linear|[quad]easeIn|[quad]easeOut|[quad]easeInOut|circEaseIn|circEaseOut|circEaseInOut] A effect name [default value is noeffect]
 *      @param {String} [options.unit='item|page'] A unit of rolling
 *      @param {String} [options.wrapperTag='ul.className|div.className'] A tag name for panel warpper, connect tag name with class name by dots. [defualt value is ul]
 *      @param {String} [options.panelTag='li.className'] A tag name for panel, connect tag name with class by dots [default value is li]
 * @param {Array|String} data A data of rolling panels
 * @example
 * var Rolling = tui.Rolling; // or require('tui-rolling')
 * var instance = new tui.Rolling({
 *      element: document.getElementById('rolling'),
 *      initNum: 0,
 *      direction: 'horizontal',
 *      isVariable: true,
 *      unit: 'page',
 *      isAuto: false,
 *      motion: 'easeInOut',
 *      duration: 2000
 * }, ['&lt;div>data1&lt;/div>','&lt;div>data2&lt;/div>', '&lt;div>data3&lt;/div>']);
 */
var Rolling = snippet.defineClass(/** @lends Rolling.prototype */{
    init: function(options, data) { // eslint-disable-line complexity
        var isAuto = !!options.isAuto;

        /**
         * Whether ga tracking or not
         * @type {Boolean}
         * @private
         */
        var usageStatistics = snippet.isExisty(options.usageStatistics) ? options.usageStatistics : true;

        /**
         * options object
         * @type {Object}
         * @private
         */
        this._options = options;

        /**
         * The flow of next move
         * @type {String|string}
         * @private
         */
        this._flow = options.flow || 'next';

        /**
         * Whether html is drawn or not
         * @type {boolean}
         * @private
         */
        this._isDrawn = !!options.isDrawn;

        /**
         * Auto rolling timer
         * @type {null}
         * @private
         */
        this._timer = null;

        /**
         * Auto rolling delay time
         * @type {Number}
         * @private
         */
        this._delayTime = options.delayTime || 3000;

        /**
         * A model for rolling data
         * @type {Data}
         * @private
         */
        this._model = !options.isDrawn ? new Data(options, data) : null;

        /**
         * A rolling action object
         * @type {Roller}
         * @private
         */
        this._roller = new Roller(options, this._model &amp;&amp; this._model.getData(), this);

        if (options.initNum) {
            this.moveTo(options.initNum);
        }

        if (isAuto) {
            this.auto();
        }

        if (usageStatistics) {
            sendHostName();
        }
    },

    /* eslint-disable complexity */
    /**
     * Roll the rolling component. If there is no data, the component have to have with fixed data
     * @param {String} data A rolling data
     * @param {String} [flow] A direction rolling
     * @example
     * rolling.roll('&lt;div>data&lt;/div>', 'horizontal');
     */
    roll: function(data, flow) {
        var overBoundary;

        flow = flow || this._flow;

        // If rolling status is not idle, return
        if (this._roller.status !== 'idle') {
            return;
        }

        if (this._options.isVariable) {
            if (!data) {
                throw new Error('roll must run with data');
            }

            this.setFlow(flow);
            this._roller.move(data);
        } else {
            this.setFlow(flow);

            if (this._model) {
                overBoundary = this._model.changeCurrent(flow);
                data = this._model.getData();
            }
            if (!overBoundary) {
                this._roller.move(data);
            }
        }
    },
    /* eslint-enable complexity */

    /**
     * Set direction
     * @param {String} flow A direction of rolling
     * @example
     * rolling.setFlow('horizontal');
     */
    setFlow: function(flow) {
        this._flow = flow;
        this._roller.setFlow(flow);
    },

    /* eslint-disable complexity */
    /**
     * Move to target page
     * @param {Number} page A target page
     * @example
     * rolling.moveTo(3);
     */
    moveTo: function(page) {
        var len, max, min, current;
        var duration, absInterval, isPrev, flow, i;

        if (this._isDrawn) {
            this._roller.moveTo(page);

            return;
        }

        len = this._model.getDataListLength();
        max = Math.min(len, page);
        min = Math.max(1, page);
        current = this._model.getCurrent();

        if (isNaN(Number(page))) {
            throw new Error('#PageError moveTo method have to run with page');
        }

        if (this._options.isVariable) {
            throw new Error('#DataError : Variable Rolling can\'t use moveTo');
        }

        isPrev = this.isNegative(page - current);
        page = isPrev ? min : max;
        flow = isPrev ? 'prev' : 'next';
        absInterval = Math.abs(page - current);
        duration = this._options.duration / absInterval;

        this.setFlow(flow);

        for (i = 0; i &lt; absInterval; i += 1) {
            this._model.changeCurrent(flow);
            this._roller.move(this._model.getData(), duration);
        }
    },
    /* eslint-enable complexity */

    /**
     * Check the number is negative or not
     * @param {Number} number - A number to figure out
     * @returns {Boolean}
     * @private
     */
    isNegative: function(number) {
        return !isNaN(number) &amp;&amp; number &lt; 0;
    },

    /**
     * Stop auto rolling
     */
    stop: function() {
        window.clearInterval(this._timer);
    },

    /**
     * Start auto rolling
     * @example
     * rolling.auto();
     */
    auto: function() {
        this.stop();
        this._timer = window.setInterval(snippet.bind(function() {
            this._model.changeCurrent(this._flow);
            this._roller.move(this._model.getData());
        }, this), this._delayTime);
    }
});

snippet.CustomEvents.mixin(Rolling);

module.exports = Rolling;
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="https://cloud.githubusercontent.com/assets/12269563/20029815/01133928-a39a-11e6-80f3-12500a91c755.png" style="width: 150px; height: 13px">
    <div class="footer-text">NHN Entertainment. Frontend Development Lab</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
